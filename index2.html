<!doctype html>
<html lang="fa" dir="rtl">
<head>
Â  <meta charset="utf-8">
Â  <meta name="viewport" content="width=device-width,initial-scale=1">
Â  <title>Ø­Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª</title>
Â  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%237b1fa2'/><text x='50%' y='55%' text-anchor='middle' font-size='50' fill='white' font-family='Arial' dy='.3em'>âˆ‘</text></svg>">
Â  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet">
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: 'Vazirmatn', sans-serif;
Â  Â  Â  background: linear-gradient(135deg, #e0f7fa, #f3e5f5);
Â  Â  Â  color: #111;
Â  Â  Â  padding: 24px;
Â  Â  }
Â  Â  .card {
Â  Â  Â  max-width: 820px;
Â  Â  Â  margin: 24px auto;
Â  Â  Â  padding: 28px;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  background: #ffffffcc;
Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  box-shadow: 0 12px 25px rgba(0,0,0,0.12);
Â  Â  Â  transition: transform 0.2s ease;
Â  Â  }
Â  Â  .card:hover {
Â  Â  Â  transform: translateY(-5px);
Â  Â  }
Â  Â  h1 {
Â  Â  Â  margin: 0 0 16px;
Â  Â  Â  font-size: 26px;
Â  Â  Â  color: #4a148c;
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  label {
Â  Â  Â  display: block;
Â  Â  Â  margin: 14px 0 6px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: #333;
Â  Â  }
Â  Â  input[type=text], select, textarea {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 12px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  font-size: 16px;
Â  Â  Â  transition: border 0.2s;
Â  Â  }
Â  Â  input[type=text]:focus {
Â  Â  Â  border-color: #7b1fa2;
Â  Â  Â  outline: none;
Â  Â  Â  box-shadow: 0 0 8px rgba(123,31,162,0.2);
Â  Â  }
Â  Â  button {
Â  Â  Â  margin-top: 16px;
Â  Â  Â  padding: 12px 20px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  border: none;
Â  Â  Â  background: #7b1fa2;
Â  Â  Â  color: white;
Â  Â  Â  font-weight: 700;
Â  Â  Â  font-size: 16px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background 0.2s;
Â  Â  }
Â  Â  button:hover {
Â  Â  Â  background: #9c27b0;
Â  Â  }
Â  Â  pre {
Â  Â  Â  background: #1a237e;
Â  Â  Â  color: #e8eaf6;
Â  Â  Â  padding: 16px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  overflow-x: auto;
Â  Â  Â  font-size: 15px;
Â  Â  }
Â  Â  .row {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 14px;
Â  Â  }
Â  Â  .col {
Â  Â  Â  flex: 1;
Â  Â  }
Â  Â  .small {
Â  Â  Â  font-size: 14px;
Â  Â  Â  color: #555;
Â  Â  }
Â  Â  details summary {
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: 500;
Â  Â  Â  color: #7b1fa2;
Â  Â  Â  margin-top: 12px;
Â  Â  }
Â  </style>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/nerdamer/1.1.11/nerdamer.core.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/nerdamer/1.1.11/Algebra.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/nerdamer/1.1.11/Calculus.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/nerdamer/1.1.11/Extra.min.js"></script>
</head>
<body>
Â  <div class="card">
Â  Â  <h1>Ø­Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª â€” Ø³Ø§Ø¯Ù‡ Ùˆ Ø³Ø±ÛŒØ¹</h1>
Â  Â  <p class="small">ÙØ±Ù…ÙˆÙ„ ÛŒØ§ Ø¹Ø¨Ø§Ø±Øª Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯. Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§: <code>x^2 - 2 = 0</code>ØŒ <code>sin(x) - 0.5 = 0</code>ØŒ <code>2x+3=7</code>.</p>

Â  Â  <label for="equation">Ù…Ø¹Ø§Ø¯Ù„Ù‡</label>
Â  Â  <input id="equation" type="text" placeholder="Ù…Ø«Ø§Ù„: 2x+3=7" value="2x+3=7">

Â  Â  <label for="variable">Ù…ØªØºÛŒØ± (Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ)</label>
Â  Â  <input id="variable" type="text" value="x">

Â  Â  <div class="row">
Â  Â  Â  <div class="col">
Â  Â  Â  Â  <label for="range">Ø¯Ø§Ù…Ù†Ù‡ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø±Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ (Ø¨Ø±Ø§ÛŒ ØªÙˆØ§Ø¨Ø¹)</label>
Â  Â  Â  Â  <input id="range" type="text" value="-100,100">
Â  Â  Â  </div>
Â  Â  Â  <div class="col">
Â  Â  Â  Â  <label for="tolerance">Ø§ÛŒÙ¾Ø³Ù„ÙˆÙ† (Ø¯Ù‚Øª Ø¹Ø¯Ø¯ÛŒ)</label>
Â  Â  Â  Â  <input id="tolerance" type="text" value="1e-9">
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <button id="solveBtn">Ø­Ù„ Ú©Ù†</button>

Â  Â  <h3>Ù†ØªÛŒØ¬Ù‡</h3>
Â  Â  <pre id="output">Ù‡ÛŒÚ†â€Œ Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ù‡Ù†ÙˆØ²</pre>

Â  Â  <details>
Â  Â  Â  <summary>ØªÙˆØ¶ÛŒØ­Ø§Øª / Ø±ÙˆØ´</summary>
Â  Â  Â  <p class="small">Ø§Ø¨ØªØ¯Ø§ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø­Ù„ ØªØ­Ù„ÛŒÙ„ÛŒ Ø¨Ø§ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ <em>nerdamer</em> Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯. Ø§Ú¯Ø± Ø­Ù„ ØªØ­Ù„ÛŒÙ„ÛŒ Ù…Ù…Ú©Ù† Ù†Ø¨ÙˆØ¯ ÛŒØ§ Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¹Ø¯Ø¯ÛŒ Ø¨ÙˆØ¯ØŒ Ø§Ø² Ø±ÙˆØ´ Ù†Ù…ÙˆÙ†Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ + Ù‚Ø·Ø¹â€ŒÙ†Ù‚Ø·Ù‡ (bisection) Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
Â  Â  </details>
Â  </div>

<script>
Â  // âœ… ØªØ§Ø¨Ø¹ ØªØ´Ø®ÛŒØµ Ùˆ Ø§ÙØ²ÙˆØ¯Ù† Ø¶Ø±Ø¨â€ŒÙ‡Ø§ÛŒ Ø¶Ù…Ù†ÛŒ (Ø´Ø§Ù…Ù„ Ø¨ÛŒÙ† Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§)
Â  function insertImplicitMultiplication(eq) {
Â  Â  // 1. Ø¹Ø¯Ø¯ Ø¯Ø± Ú©Ù†Ø§Ø± Ù…ØªØºÛŒØ± ÛŒØ§ Ù¾Ø±Ø§Ù†ØªØ² (2x â†’ 2*x)
Â  Â  eq = eq.replace(/(\d)([a-zA-Z(])/g, '$1*$2');
Â  Â  // 2. Ù…ØªØºÛŒØ± Ø¯Ø± Ú©Ù†Ø§Ø± Ù¾Ø±Ø§Ù†ØªØ² (x(x+1) â†’ x*(x+1))
Â  Â  eq = eq.replace(/([a-zA-Z])\(/g, '$1*(');
Â  Â  // 3. Ù¾Ø±Ø§Ù†ØªØ² Ø¨Ø³ØªÙ‡ Ø¯Ø± Ú©Ù†Ø§Ø± Ù¾Ø±Ø§Ù†ØªØ² Ø¨Ø§Ø² ()(x) â†’ )*(x) 
Â  Â  eq = eq.replace(/\)(\s*)\(/g, ')*$1(');
Â  Â  // 4. Ù¾Ø±Ø§Ù†ØªØ² Ø¨Ø³ØªÙ‡ Ø¯Ø± Ú©Ù†Ø§Ø± Ù…ØªØºÛŒØ± ÛŒØ§ Ø¹Ø¯Ø¯ ()(x) â†’ )*(x) 
Â  Â  eq = eq.replace(/\)(\s*)(\d|[a-zA-Z(])/g, ')*$1$2');
Â  Â  
Â  Â  return eq;
Â  }

Â  function normalizeEquation(eq){Â 
Â  Â  if(eq.indexOf('=')!==-1){Â 
Â  Â  Â  const parts = eq.split('=');Â 
Â  Â  Â  return '(' + parts.slice(0,parts.length-1).join('=') + ')-(' + parts[parts.length-1] + ')';Â 
Â  Â  }Â 
Â  Â  return '('+eq+')';Â 
Â  }

Â  function trySymbolicSolve(expr, variable){Â 
Â  Â  if(typeof nerdamer==='undefined')return null;Â 
Â  Â  try{Â 
Â  Â  Â  if(typeof nerdamer.solve==='function'){Â 
Â  Â  Â  Â  return nerdamer.solve(expr, variable);Â 
Â  Â  Â  }Â 
Â  Â  Â  if(typeof nerdamer.solveEquations==='function'){Â 
Â  Â  Â  Â  return nerdamer.solveEquations([expr]);Â 
Â  Â  Â  }Â 
Â  Â  }catch(e){console.warn('symbolic failed',e);}Â 
Â  Â  return null;Â 
Â  }

Â  function evalNumeric(expr, variable, value){Â 
Â  Â  try{Â 
Â  Â  Â  if(typeof nerdamer!=='undefined'){Â 
Â  Â  Â  Â  const replaced=expr.replace(new RegExp('\\b'+variable+'\\b','g'),'('+value+')');Â 
Â  Â  Â  Â  return parseFloat(nerdamer(replaced).evaluate().text());Â 
Â  Â  Â  }Â 
Â  Â  }catch(e){}Â 
Â  Â  try{Â 
Â  Â  Â  const fn=new Function(variable,'return ('+expr+');');Â 
Â  Â  Â  return Number(fn(value));Â 
Â  Â  }catch(e){return NaN;}Â 
Â  }

Â  function bisectionRoot(expr,variable,a,b,tol,maxIter=60){
Â  Â  let fa=evalNumeric(expr,variable,a);
Â  Â  let fb=evalNumeric(expr,variable,b);
Â  Â  if(isNaN(fa)||isNaN(fb))return null;
Â  Â  if(fa===0)return a;
Â  Â  if(fb===0)return b;
Â  Â  if(fa*fb>0)return null;
Â  Â  let lo=a,hi=b,mid,fmid;
Â  Â  for(let i=0;i<maxIter;i++){
Â  Â  Â  mid=(lo+hi)/2;
Â  Â  Â  fmid=evalNumeric(expr,variable,mid);
Â  Â  Â  if(Math.abs(fmid)<=tol)return mid;
Â  Â  Â  if(fa*fmid<=0){hi=mid;fb=fmid;}else{lo=mid;fa=fmid;}
Â  Â  }
Â  Â  return(lo+hi)/2;
Â  }

Â  function numericScanAndSolve(expr,variable,rangeStr,tol){
Â  Â  const parts=rangeStr.split(',').map(s=>parseFloat(s.trim()));
Â  Â  const a=parts[0]||-100,b=parts[1]||100;
Â  Â  const samples=2000;
Â  Â  const xs=[];
Â  Â  for(let i=0;i<=samples;i++)xs.push(a+(b-a)*i/samples);
Â  Â  const values=xs.map(x=>evalNumeric(expr,variable,x));
Â  Â  const roots=[];
Â  Â  for(let i=0;i<samples;i++){
Â  Â  Â  const x1=xs[i],x2=xs[i+1];
Â  Â  Â  const v1=values[i],v2=values[i+1];
Â  Â  Â  if(isNaN(v1)||isNaN(v2))continue;
Â  Â  Â  if(Math.abs(v1)<tol)roots.push(x1);
Â  Â  Â  if(v1*v2<0){
Â  Â  Â  Â  const root=bisectionRoot(expr,variable,x1,x2,tol);
Â  Â  Â  Â  if(root!==null){
Â  Â  Â  Â  Â  if(!roots.some(r=>Math.abs(r-root)<1e-7))roots.push(root);
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }
Â  Â  const last=xs[xs.length-1];
Â  Â  if(Math.abs(values[values.length-1])<tol)roots.push(last);
Â  Â  return roots.sort((a,b)=>a-b);
Â  }

Â  document.getElementById('solveBtn').addEventListener('click',()=>{
Â  Â  let eqText=document.getElementById('equation').value.trim();
Â  Â  
Â  Â  const out=document.getElementById('output');
Â  Â  
Â  Â  // ğŸ›‘ Ø´Ø±Ø· Ø§Ø®ØªØµØ§ØµÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù†Ø§Ù… Ø³Ø§Ø²Ù†Ø¯Ù‡ 
Â  Â  if (eqText === '2012+1391') {
Â  Â  Â  out.textContent = 'âœ¨ Ø³Ø§Ø²Ù†Ø¯Ù‡: Ø§Ù…ÛŒØ± Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‡ÛŒØ§Ø±ÛŒ\nØªØ§Ø±ÛŒØ® Ø³Ø§Ø®Øª: Ù…Ù‡Ø± Û±Û´Û°Û´';
Â  Â  Â  return; // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø¯ Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡
Â  Â  }
Â  Â  // ğŸ›‘ Ù¾Ø§ÛŒØ§Ù† Ø´Ø±Ø· Ø§Ø®ØªØµØ§ØµÛŒ

Â  Â  eqText = insertImplicitMultiplication(eqText); 

Â  Â  const variable=document.getElementById('variable').value.trim()||'x';
Â  Â  const rangeStr=document.getElementById('range').value.trim();
Â  Â  const tol=parseFloat(document.getElementById('tolerance').value)||1e-9;
Â  Â  
Â  Â  out.textContent='Ø¯Ø± Ø­Ø§Ù„ ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø­Ù„...';

Â  Â  if(!eqText){
Â  Â  Â  out.textContent='Ù„Ø·ÙØ§Ù‹ Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.';
Â  Â  Â  return;
Â  Â  }

Â  Â  const expr=normalizeEquation(eqText);
Â  Â  const sym=trySymbolicSolve(expr,variable);

Â  Â  if(sym){
Â  Â  Â  try{
Â  Â  Â  Â  let text='';
Â  Â  Â  Â  if(Array.isArray(sym)){
Â  Â  Â  Â  Â  if(sym.length===0)
Â  Â  Â  Â  Â  Â  text='Ø­Ù„ Ù†Ù…ÛŒØ´ÙˆØ¯ ÛŒØ§ Ø¬ÙˆØ§Ø¨ ØµØ±ÛŒØ­ Ù†Ø¯Ø§Ø±Ø¯.';
Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  text='Ø¬ÙˆØ§Ø¨(Ù‡Ø§ÛŒ Ù†Ù…Ø§Ø¯ÛŒÙ†):\n'+sym.map(s=>String(s)).join('\n');
Â  Â  Â  Â  }else{
Â  Â  Â  Â  Â  text='Ø¬ÙˆØ§Ø¨ Ù†Ù…Ø§Ø¯ÛŒÙ†: '+String(sym);
Â  Â  Â  Â  }
Â  Â  Â  Â  out.textContent=text;
Â  Â  Â  Â  return;
Â  Â  Â  }catch(e){console.warn(e);}
Â  Â  }

Â  Â  try{
Â  Â  Â  const roots=numericScanAndSolve(expr,variable,rangeStr,tol);
Â  Â  Â  if(roots.length===0){
Â  Â  Â  Â  out.textContent='Ù‡ÛŒÚ† Ø±ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ù…Ø´Ø®Øµâ€ŒØ´Ø¯Ù‡ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.';
Â  Â  Â  }else{
Â  Â  Â  Â  let t='Ø±ÛŒØ´Ù‡(Ù‡Ø§) Ø¹Ø¯Ø¯ÛŒ:\n';
Â  Â  Â  Â  for(let r of roots){t+=r+'\n';}
Â  Â  Â  Â  out.textContent=t;
Â  Â  Â  }
Â  Â  }catch(e){
Â  Â  Â  out.textContent='Ø®Ø·Ø§ Ø¯Ø± Ø­Ù„ Ø¹Ø¯Ø¯ÛŒ: '+e;
Â  Â  }
Â  });
</script>
</body>
</html>
